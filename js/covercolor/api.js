const coverColor=()=>{const e=document.getElementById("post-cover")?.src;e?handleApiColor(e):(document.documentElement.style.setProperty("--efu-main","var(--efu-theme)"),document.documentElement.style.setProperty("--efu-main-op","var(--efu-theme-op)"),document.documentElement.style.setProperty("--efu-main-op-deep","var(--efu-theme-op-deep)"),document.documentElement.style.setProperty("--efu-main-none","var(--efu-theme-none)"),initThemeColor())};function handleApiColor(e){const t=JSON.parse(localStorage.getItem("Solitude"))||{};if(t.postcolor&&t.postcolor[e]){const o=t.postcolor[e].value,[n,r,l]=o.match(/\w\w/g).map((e=>parseInt(e,16)));setThemeColors(o,n,r,l)}else img2color(e)}function img2color(e){const t=coverColorConfig.api+encodeURIComponent(e);fetch(t).then((e=>e.json())).then((t=>{const o=t.RGB,[n,r,l]=o.match(/\w\w/g).map((e=>parseInt(e,16)));setThemeColors(o,n,r,l);const m=Date.now()+coverColorConfig.time,s=JSON.parse(localStorage.getItem("Solitude"))||{};s.postcolor=s.postcolor||{},s.postcolor[e]={value:o,expiration:m},localStorage.setItem("Solitude",JSON.stringify(s))})).catch((e=>{console.error("请检查API是否正常！\n"+e)}))}function setThemeColors(e,t=null,o=null,n=null){if(e){if(document.documentElement.style.setProperty("--efu-main",e),document.documentElement.style.setProperty("--efu-main-op",e+"23"),document.documentElement.style.setProperty("--efu-main-op-deep",e+"dd"),document.documentElement.style.setProperty("--efu-main-none",e+"00"),t&&o&&n){if(Math.round((299*parseInt(t)+587*parseInt(o)+114*parseInt(n))/1e3)<125){let e=document.getElementsByClassName("card-content");for(let t=0;t<e.length;t++)e[t].style.setProperty("--efu-card-bg","var(--efu-white)");let t=document.getElementsByClassName("author-info__sayhi");for(let e=0;e<t.length;e++)t[e].style.setProperty("background","var(--efu-white-op)"),t[e].style.setProperty("color","var(--efu-white)")}}document.getElementById("coverdiv").classList.add("loaded"),initThemeColor()}else document.documentElement.style.setProperty("--efu-main","var(--efu-theme)"),document.documentElement.style.setProperty("--efu-main-op","var(--efu-theme-op)"),document.documentElement.style.setProperty("--efu-main-op-deep","var(--efu-theme-op-deep)"),document.documentElement.style.setProperty("--efu-main-none","var(--efu-theme-none)"),initThemeColor()}